1820 alpha008로부터의 수정
shape 태그의 스펠 미스 수정
WINAPI 사용시의 메모리 리크 수정
3항연산자'? '의 전에'#'가 발견되었을 경우의 에러 메세지를 수정





이하 1820 alpha의 갱신점

"CALLTRAINTEND"스펠 미스 수정
DRAWLINEFORM 명령, GETLINESTR 함수에 공문자열을 건네주면 freeze 하는 불편을 수정
TINPUT계 명령의 타임 아웃 후, 마우스 직하의 버튼이 선택되지 않는 불편을 수정
PRINT_IMG, PRINT_RECT, PRINT_SPACE 명령 추가
HTML_POPPRINTINGSTR 함수 추가
3항연산자'? '의 전에'#'가 발견되었을 경우의 에러 메세지를 수정



HTML_POPPRINTINGSTR()
  현재 PRINT중의 캐릭터 라인 버퍼를 Html로 취득해, 버퍼를 비웁니다

PRINT_IMG <캐릭터 라인식>
  행중으로 지정한 화상을 표시한다.

PRINT_RECT <수식>
  행중에 가로폭이 font size의<수식>%인 직사각형을 표시한다.
  SETCOLOR 명령에 의해 폰트색과 같게 색을 바꿀 수 있다.

PRINT_RECT <수식>, <수식>, <수식>, <수식>
  행중에 x, y, 가로폭, 세로폭이 각각 인수%인 직사각형을 표시한다.
  SETCOLOR 명령에 의해 폰트색과 같게 색을 바꿀 수 있다.

PRINT_SPACE <수식>
  font size의<수식>%분만큼 아무것도 표시하지 않는 스페이스를 만든다.

HTML_PRINT 명령에 태그 추가
  <img src='~' srcb='~'>
  행중으로 지정한 화상을 표시한다.
  src 속성은 필수, srcb 속성은 임의
  src에는 resource 폴더의 csv로 지정한 자원명을 넣는다
  화상은 종횡비를 유지한 채로, 세로폭이 font size와 일치하도록(듯이) 축소 또는 확대해 표시된다
  srcb에는 버튼 선택시에 표시되어야 할 자원명을 넣는다
  화상은 세로폭이 font size, 가로폭이 src와 같게 되도록(듯이) 축소 또는 확대해 표시된다

  <shape type='rect' param='~' color='~' bcolor='~'>
  행중으로 지정한 도형을 묘화 한다.
  type, param 속성은 필수, color, bcolor 속성은 임의
  type는 현재 rect(직사각형) 마셔.
  param에는 도형 묘화를 위한 파라미터를 font size와의 비율(백분율)로 지정한다
  복수의 값을 입금시키려면 칸마로 단락짓는다
　　type='rect'에서는 param에는 1또는 4개의 숫자를 넣는다
　　param가 1개 때 직사각형의 옆의 의미가 된다
　　　<shape type='rect' param='400'>는 가로폭이 font size의 400%인 직사각형이 된다
　　param가 4개 때 x, y, 가로폭, 세로폭의 순서로 사용된다
　　　<shape type='rect' param='0,25,400,50'>는 행의 상하 중앙에 세로폭이 font size의 50%의 직사각형을 묘화 한다
　　　param='400'  는 param='0, 0, 400, 100'에 동일하다.
  color에는 도형의 색을 지정한다. 지정의 포맷은<font>태그와 같음.
  bcolor에는 도형의 선택중의 색을 지정한다.

  <shape type='space' param='~'>
  지정한 폭만 아무것도 표시하지 않는다.
　　<shape type='space' param='400'>는 font size의 400%의 구간만 아무것도 묘화 하지 않는다.

<img>(와)과<shape>태그는 문법적으로 올바르면 속성치가 부정해도 에러는 되지 않고 html 태그를 표시한다.
태그가 표시되는 케이스는 존재하지 않는 자원을 참조하거나 행의 높이로부터 넘쳐 나오는 shape를 묘화 하려고 했을 경우 따위.
또 로그 출력에 대해서는 도형이나 이미지 파일을 사용할 수 없기 때문에 html 태그의 형태로 출력된다.




resource file 지정
실행 파일의 폴더에 resources 폴더를 작성해, 그 중에 resource file를 준비한다.
파일은 resources 폴더의 직하에 둘 필요가 있다. 서브 폴더는 불가.
화상의 표시를 위해서(때문에)는 화상 파일과 csv 파일이 필요하다
화상 파일은 bmp, jpg, png 형식에서 준비해 resources 폴더내에 둔다.
csv 파일은 이름은 뭐든지 좋다. 서식은 이하와 같다
;자원명, 원파일명, x, y, width, height
자원명은<img src='~'>의 src 속성의 속성치로서 사용하는 이름이다. 중복이 있어서는 안 된다.
원파일명은 화상 파일의 이름. 확장자 포함한다.
x, y, width, height에 원화상안의 사용하는 부분을 픽셀 단위로 지정한다.
x, y, width, height는 생략 할 수도 있어 그 경우는 화상 전체가 사용된다.

csv 파일로 지정된 모든 화상 파일은 Emuera의 기동시에 메모리상에 전개되고 종료할 때까지 메모리를 점유 한다.
대량의 화상 파일을 읽게 하는 것보다도 화상을 단일의 파일에 합성해 범위를 지정해 이용한 (분)편이 메모리적으로도 속도적으로도 유리하다고 생각된다.
콘피그의 묘화 인터페이스에 WINAPI를 지정하고 있는 경우, 투과 처리 및 알파 브렌드는 행해지지 않는다.
묘화 인터페이스가 Graphics 또는 TextRenderer의 경우에는 투과 처리 및 알파 브렌드를 한다.
화상 자원의 height가 font size와 일치하지 않는 경우, 화상은 확대 또는 축소된다.
확대 축소도 WINAPI와 Graphics 또는 TextRenderer로 약간 다르다.
가능하면 화상 자원의 세로폭은 font size와 일치시키는 것이 바람직하다.





