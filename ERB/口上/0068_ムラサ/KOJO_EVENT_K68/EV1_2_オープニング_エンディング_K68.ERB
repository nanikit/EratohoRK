;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
;
;	ムラサ口上 オープニング、エンディング口上ファイル
;
;	オープニング, エンディングイベント口上のファイル
;
;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#

;========================================================================
;EV1, オープニング口上
;========================================================================
;・口上主(TARGET)が主人である場合にのみ表示される
;・戻り値を2とした場合はOP後の本体側のタイトルロゴは表示されない
;・ノーマルモード以外の場合、調教対象がNO:MASTER == 0(いわるゆるあなた)でない可能性あり
;-------------------------------------------------
;関連変数…
;FLAG:モード(0=通常/1=サンドボックス/9=エキストラ)
;-------------------------------------------------
@KOJO_EVENT_K68_1(ARG)
;-------------------------------------------------
;CNAMEやCSTR:召喚可能助手、その他各種代入に向いた箇所の一つです
;コマンド封印も個別に可能ですが、本体側の意向として(一応)隠し機能にしたいという事情もあり
;判る人はどうぞ、という事で解説はしない方向で
;-------------------------------------------------
;口上を表示した上で、終端をRETURN 0とする事で本体側の汎用OPに渡す事も可能だったりします
;汎用OPに飛ばした際はタイトルロゴが表示されます
;-------------------------------------------------

;ノーマルモード以外の場合、調教対象によっては整合性が崩れるのでノーマルモードに限定してしまいます@/L
;━━━━━━━━━━━━━━━━━━━━━━━━
;ノーマルモード時
;RESULT値(1,OPを表示した後本体のタイトルロゴを表示/2, 本体のタイトルロゴを表示しない)
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(100) && !FLAG:モード
	;オリジナルはTALENT:MASTER:オトコで分かれていたのですが、LOCALS使ってまとめてしまいます@/L
	LOCALS = \@ TALENT:MASTER:オトコ ? 貴方 # 貴女 \@
	CALL TWAIT_3
	PRINTFORMDW う……ここは？　%CALLNAME:MASTER%はぼんやりとした頭で周囲を見回した。
	PRINTL 
	PRINTFORMDW %CALLNAME:MASTER%は驚いた。　そこは自分の全く知らない部屋だったからだ。
	PRINTFORMDL 広い割には一つの小さな窓しか無く、調度品類も何一つ見当たらないような殺風景な部屋だった。
	PRINTFORMDW その部屋にぽつんと敷かれた布団で自分は眠っていたようだ。
	PRINTL 
	PRINTFORMDW 軽い地震でもあったのか小さく部屋が揺れている気がした。
	PRINTFORMDW どうやらその為に目が覚めたようだ。
	PRINTFORMDL それにしても…　はて、どうして自分はこんな所で眠っているのだろうか。
	PRINTFORMDW 記憶を思い返そうとするが、まるで靄が掛かった様に思い出せないでいた。
	PRINTFORMDW その時。
	PRINTL
	PRINTFORMW 「あら、起きていたのね？」
	PRINTL
	;キャラカットイン
	CALL CHARA_CUTIN(CSTR:二つ名, CSTR:登場名, CSTR:ローマ字)
	PRINTL
	PRINTL 
	PRINTFORMDW 背中近くでいきなり声がしたのであわてて振り向くと、そこには水兵の格好をした可愛らしい黒髪の少女がいた。
	PRINTFORMW 「ごめんなさいね？こんな何も無い部屋で寝かせてしまって」
	PRINTFORML 「私は村紗 水蜜、ムラサと呼ばれているわ」
	PRINTFORMDW 眼前のムラサと名乗った少女に、自分は何故このような所で寝ていたのかを聞いた。
	PRINTL
	PRINTFORML 「%LOCALS%は里の近くに新しく立ったお寺の事、知って居るかしら？」
	PRINTFORML 「そこにはね、水難事故を引き起こして舟を転覆させていた幽霊が居るの。」
	PRINTFORML 「もっとも、それは昔の話で今は暇つぶしに人を驚かせようとする位だけどね」
	PRINTFORMDW えーと、話が見えないけれど、それが一体どういう関係が？
	PRINTL
	PRINTFORMW 「その幽霊がね、川で釣りをしていた%LOCALS%を脅かして気絶させてしまったの」
	PRINTFORML 「だから私が%LOCALS%をここに連れてきて寝かせておいたのです」
	PRINTFORMDW 前置きが長かったが、要するに妖怪に脅かされて気絶していた所を介抱してくれた、という事か。
	PRINTFORMDW %CALLNAME:MASTER%はそう解釈し少女に礼を言った。
	PRINTL
	PRINTFORMW 「御免なさい、残念だけどこの話には続きがあるの」
	PRINTL 
	PRINTFORMDW …はて？続きとは一体なんだろう？　現に自分は助かっているではないか。
	PRINTL
	PRINTFORMW 「さっきの船幽霊の話だけれど」
	PRINTFORML 「その幽霊は物理的に人間を溺れさせる事はやめたけれど、そのままでは存在意義が無くなり消えてしまう」
	PRINTFORML 「肉体のある妖怪ならば多少の事では消えないけれど、幽霊ってのはその辺脆いものでね」
	PRINTL
	PRINTFORMW 「だからその幽霊は考えた」
	PRINTFORMW 「物理的に溺れさせてしまうのが駄目なのならば」
	PRINTFORMW 「精神的に溺れさせてしまえばいいと」
	PRINTFORMDW %CALLNAME:MASTER%の脳裏に、ひどく嫌な考えが浮かんだ。　まさか…
	PRINTL
	PRINTFORMW 「察したようね」
	;ＢＧＭカットイン キャプテン・ムラサ
	CALL BGM_CUTIN(CSTR:曲１)
	PRINTFORMW 「そう、その船幽霊とは私の事」
	PRINTFORMW 「そして%CALLNAME:MASTER%は私の贄に選ばれた」
	PRINTFORMDW また、小さく部屋が揺れた気がした。
	PRINTFORMDL …いや、気のせいでは無い。　揺れているのだ、部屋そのものが。
	PRINTL
	PRINTFORMW 「残念だけれど%LOCALS%はもう逃げることは出来ないわ」
	PRINTFORML 「何故って？それはね、ここはもう私の船の中」
	PRINTFORML 「後で窓の外を見てみるといいわ、素敵な景色が見えるわよ？」
	PRINTL
	PRINTFORMDL …また、小さく部屋が揺れた。
	PRINTFORMW 「まあ、気持ち良い事をするだけで、命に関わる事をする気は無いから安心してね」
	PRINTFORMW 「…もっとも、%LOCALS%の態度次第ではどうなるか判らないから気を付けて」
	PRINTL
	PRINTFORMW 「それではこれから、%LOCALS%を快楽の海で溺れさせてあげるわね」
	PRINTL
	
	;0.60当時にこの手の機能があったらいかにも使ってそうな印象を受けたのでちょっと弄りました@/L
	
	;文字色リセット
	RESETCOLOR
	;フォントをＭＳ 明朝に
	SIF CHKFONT("ＭＳ 明朝")
		SETFONT "ＭＳ 明朝"
	;フォントスタイルを太字、斜体に
	FONTSTYLE 3
	;REDRAW 0でカットイン中の描画を抑制
	REDRAW 0
	;中央で表示
	ALIGNMENT CENTER
	CALLF ANIME_CONFIG("TIMES", 1)
	;全画面カットイン
	CALL FULLCUTIN2(0, 17, "　～　eratohoReverse　start　～")
	;左寄せに戻す
	ALIGNMENT LEFT
	;文字色を戻す
	CALL KOJO_COLOR(TARGET)
	;フォントを戻す
	SETFONT "ＭＳ ゴシック"
	;フォントスタイルを戻す
	FONTSTYLE 0
	CALL WAIT_3
	;RESULT値2で本体のタイトルロゴを表示しない
	RETURN 2
ENDIF

;━━━━━━━━━━━━━━━━━━━━━━━━
;ノーマルモード以外の場合
;RESULT値(1,OPを表示した後本体のタイトルロゴを表示/2, 本体のタイトルロゴを表示しない)
;━━━━━━━━━━━━━━━━━━━━━━━━
;IF 口上記入チェック(0) && FLAG:モード > 0
;ENDIF

;========================================================================
;EV2, エンディングイベント口上
;========================================================================
;・開始30日以降、日時の更新時にシステム側からEVENT2が呼び出される
;・戻り値1以上が返ると本体側でFLAG:END達成が立ち、以降はシステム側から呼び出される事はない
;・以前は戻り値1以外はFLAG:END達成が立たない仕様でしたが、現在はRESULT > 0ならフラグが立つようになっています
;・必要に応じてFIRSTEVENTを使っておくと万が一の保険にはなりますし、仕様変更にも強いです
;-------------------------------------------------
;　最短で呼び出されるのが30日というだけなので、その他の部分では口上側で任意に条件設定が可能です
;　IF 口上記入チェック() &&で条件で区切るなり、IF 口上記入チェック()で大分岐にした上で、小分岐内で個別に条件設定も出来ます
;　階層イベント形式にして表示させた上でRETURN 0。最後にRETURN 1で。なんて事も可能ではあったり
;　可能性は無限にあるので、条件設定は各口上作者に委ねたいと思います
;-------------------------------------------------
@KOJO_EVENT_K68_2(ARG)
;-------------------------------------------------
;将来的にはCFLAG:依存度による本体側のED分岐なんていう代物の構想もあったり
;その際には、本体側の処理を呼ぶ/殺すも口上側で任意に設定が可能という方向性
;とはいえ、いつになるのか、実現するかも定かではないので、現状は各自頑張って下さいということで
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;エンディング
;━━━━━━━━━━━━━━━━━━━━━━━━
;IF 口上記入チェック(0)
;ENDIF