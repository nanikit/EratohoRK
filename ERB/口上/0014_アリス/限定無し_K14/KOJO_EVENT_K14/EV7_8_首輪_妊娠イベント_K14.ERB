;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
;
;		アリス口上 首輪、妊娠イベント口上ファイル
;
;	奴隷の首輪の取得、及び妊娠・出産イベント口上をまとめたファイル
;
;Version		Reason
;1.71			@口上記入チェック仕様に。その他細かな修正
;1.70			新規作成。とりあえず手探り
;
;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#

;========================================================================
;EV7, 【奴隷の首輪】取得イベント口上 
;========================================================================
;・調教者から奴隷の首輪をプレゼント？される
;・EVENT_S.ERB @EVENTTURNENDから@SLAVE_COLLARを介して呼び出される
;・表示タイミングは調教終了後、かつ日常イベントの前
;・調教者の好意が5000以上＆調教対象の好意が2000以上で【奴隷の首輪】未所持、かつ調教者が素質[サド]を所持している場合に発生
;（30601.00の挙動を見て、従来のままでは敷居が低すぎる気がしたので条件を弄った）
;・先天的に素質[サド]が無い場合でも、魔力による取得が可能である事に注意
;・v1.010時点ではTARGETが主人であるか否かの判定が無い(NTR的な状況もありえるとかそんな感じだったり)
;・CFLAG:TARGET:奴隷の首輪封印を任意の箇所で立てることでイベントの封印は可能になっています
;-------------------------------------------------
@KOJO_EVENT_K14_7(ARG)
;-------------------------------------------------
;・DRAWLINE→[口上表示]→VOIDLINE_IF(口上側からRESULTが返るとPRINTL)→地の文表示
;・地の文は以下の通り
;-------------------------------------------------
;　激しい調教のためぐったりとしている%CALLNAME:MASTER%に
;　%CALLNAME:TARGET%は自らの奴隷であることを示す首輪を装着させた…
;　【奴隷の首輪】を手に入れました。
;-------------------------------------------------
;・正直、微妙に表示タイミングに問題ありと考える
;・地の文2行→[口上表示]→【奴隷の首輪】を手に入れました。的な方がよさげな感
;------------------------------------------------
;アリスさんの場合、素質[サド]を取得する事によってのみ発生するイベント ←という感じでもなさそうな現行版の挙動
;現状アライメントが変化する事もなく、首輪の着脱もできない？
;とりあえずITEM:奴隷の首輪 == 1でEDに分岐は作れるかもしれない
;ネガティブな反応したら苦痛SOURCEとか考えないでもないけど、まぁのんびり考えようw
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;【奴隷の首輪】取得
;━━━━━━━━━━━━━━━━━━━━━━━━
;@SLAVE_COLLARからの呼び出しは手入れする余地があるように思う
;TALENT:ご主人様がRESULT 2返したら!TALENT:ご主人様の場合は抑制される的なものもあっていい
;CFLAG:主人からの首輪/CFLAG:その他首輪とか捏造して参照手段が増えれば色々と夢は広がるｗ
;------------------------------------------------
IF 口上記入チェック(100)
	;=================================================
	;アリスがご主人様でない場合
	;=================================================
	IF 口上記入チェック(100) && !TALENT:TARGET:ご主人様
		CALL TWAIT3_K14
		PRINTFORMW 「さてと、これでいいかしら」
		PRINTFORMDW %CALLNAME%は%CALLNAME:MASTER%に近づくと、手早く首輪を取り付けた
		PRINTL
		PRINTFORMW 「ふふ、よく似合ってるわ。でもそうね…」
		PRINTFORMW 「こんな事、%CNAME((FLAG:ご主人様), TARGET)%に知られたら怒られちゃうかしら？」
		PRINTFORMW 「とりあえず、目立たないようにしておいた方がよさそうね――」
		PRINTL
		PRINTFORMDL %CALLNAME%が何事か唱えながら、指先でそっと首輪に触れると、
		PRINTFORMDW 先程まで確かにあった首輪の感触が次第になくなっていく
		PRINTFORMDW それは最早、見る事も、触れる事もできぬようであった…
		PRINTL
		PRINTFORMW 「――これでいいわ。これで誰にも気取られる事なく、私は…」
		PRINTFORMW 「って、%CNAME(MASTER, TARGET)%に聞かせる訳にもいかないのよねぇ。悪いけど」
		CALL FADEOUT(10, "「ウフフ…」")
		;コンフィグを参照
		SIF ANIME_CONFIG("FADE")
			;FADEがONなら行削除する
			CLEARLINE 1
		;bit=0を立てる	716は語呂がいい！というだけだったり
		;他のcharaのEDに介入する仕組みとか考えないでもないけど邪悪過ぎるな
		;むしろその手の処理は積極的、徹底的に規制して撲滅したい派なのでｗ
		SETBIT KFLAG:TARGET:716, 0
		CALL TWAIT3_K14
		RETURN 1
	ENDIF
	
	;=================================================
	;アリスがご主人様
	;=================================================
	IF 口上記入チェック(100) && TALENT:TARGET:ご主人様 && FIRSTEVENT(0)
		CALL TWAIT3_K14
		CALL FADEIN(10, "「――起きなさい」")
		WAIT
		PRINTFORMW 「%CNAME(MASTER, TARGET)%にとっておきのプレゼントがあるの」
		PRINTFORMDL その声に%CALLNAME:MASTER%が振り向くと、%CALLNAME%がそっと佇んでいた
		PRINTFORMDW その手に何かを握り締め、雰囲気もどこか普段と違うように感じられる…
		PRINTL
		PRINTFORMW 「これは%CNAME(MASTER, TARGET)%が私のものである証。奴隷の首輪…」
		PRINTFORMW 「私の魔力によって創りだした、単なる首輪以上のものよ」
		PRINTFORMW 「この首輪を付ける事で、%CNAME(MASTER, TARGET)%は本当の意味で私のものとなる」
		PRINTL
		PRINTFORMDW %CALLNAME%は%CALLNAME:MASTER%に首輪を取り付け、言い放った…
		PRINTL
		;フォント変えて
		CALL SETFONT_K14
		CALL FADEIN(15, "　　――誓いなさい。全ての権利を放棄し、私の命令に服従することを")
		TWAIT 700, 0
		PRINTL
		CALL FADEIN(15, "　　　　　この私……、アリス・マーガトロイドに、いついかなる時も絶対に背かないことを")
		TWAIT 700, 0
		PRINTL
		;フォント戻す
		CALL RESETFONT_K14
		CALL FADEIN(10, "「その代わりに私は…」")
		WAIT
		PRINTL
		;基本全力を出さない人が言うからこそ意味がある云々とかそういう…
		PRINTFORMW 「この先、たとえ何があっても…、%CNAME(MASTER, TARGET)%を全力で守り、全力で愛してあげるわ」
		CALL FADEOUT(15, "「生きた人形として、ね――」")
		;コンフィグを参照
		SIF ANIME_CONFIG("FADE")
			;FADEがONなら行削除する
			CLEARLINE 1
		;bit=1を立てる	どう役立てるかは実はあまり考えてない。そのうち思いつくだろう的な
		SETBIT KFLAG:TARGET:716, 1
		CALL TWAIT3_K14
		RETURN 1
	ENDIF
ENDIF

;========================================================================
;EV8, 調教者妊娠・出産イベント口上 
;========================================================================
;・調教者の妊娠発覚から出産までの口上
;・@EVENTTURNENDから@PREGNACY_CHECKを介して呼び出される
;・表示タイミングは調教終了後、かつ日常イベントの前
;-------------------------------------------------
@KOJO_MS_EVENT_K14_8(ARG)
;-------------------------------------------------
;引数内訳…
;ARG=(0.妊娠発覚/1.出産間近/2.出産直前/3.女児出産/4.男児出産)
;-------------------------------------------------
;　CFLAG:TARGET:膣精 > 10000でCFLAG:TARGET:妊娠が立つ
;　以降、@EVENTTURNENDを経過する毎にカウントされ、
;　CFLAG:TARGET:妊娠=(5, 妊娠発覚/15, そろそろ生まれそう/16以降, 生まれる！→出産)という流れになる
;-------------------------------------------------
;・システム側に空行の処理が無いので、必要と思われる箇所には空行用のPRINTLを仕込んでおきます
;・必須という訳ではありませんし、まあ好みに応じて削除するなりご自由に
;・将来的には@VOIDLINE_IF等が仕込まれる可能性も無きにしも非ず
;-------------------------------------------------

;-------------------------------------------------
;・調教者は素質[妊娠][母乳体質]を得る
;・DRAWLINE→地の文表示→[口上表示]の流れ
;・地の文は以下の通り
;-------------------------------------------------
;　%CALLNAME:TARGET%のお腹がわずかに膨らんでいる
;　どうやら%CALLNAME:MASTER%の子を妊娠したようだ
;━━━━━━━━━━━━━━━━━━━━━━━━
;ARG:0, 妊娠発覚 FIRSTEVENT(0)
;記入チェック（0, 非表示、1, 表示）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(100) && ARG == 0 && KFLAG:(FLAG:ご主人様):50 && FIRSTEVENT(0)
	PRINTL 
	PRINTFORML 「ま、何時かはこうなるとは思ってたけど。でも…」
	PRINTFORMW 「自分が親になるって実感、まだあまりないというか」
	PRINTFORMW 「ちょっと不思議な感じよね？ ってこれ、私だけの問題じゃないんだから…」
	PRINTFORMW 「%CNAME(MASTER, TARGET)%にもしっかりと自覚を持ってもらわないと。ね」
	PRINTL 
	RETURN 1
ENDIF

[SKIPSTART]
;このあたりは難易度たかすぎる
;-------------------------------------------------
;・DRAWLINE→地の文表示→[口上表示]の流れ
;・地の文は以下の通り
;-------------------------------------------------
;　%CALLNAME:TARGET%のお腹がだいぶ膨らんできた
;　そろそろ生まれそうです
;━━━━━━━━━━━━━━━━━━━━━━━━
;ARG:1, そろそろ産まれそう FIRSTEVENT(10)
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && ARG == 1
ENDIF

;-------------------------------------------------
;・DRAWLINE→[口上表示]→地の文表示の流れ
;・地の文は以下の通り
;-------------------------------------------------
;　%CALLNAME:TARGET%が産気づいたようです。
;━━━━━━━━━━━━━━━━━━━━━━━━
;ARG:2, 産まれる！ FIRSTEVENT(20)
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && ARG == 2
ENDIF
[SKIPEND]

;────────────────────────────────────
;・ARG:3, ARG:4(女の子/男の子)が生まれたはARG:2(生まれる！)に連続して発生
;・女の子なら母親似、男の子なら父親似になる
;・ここでいう母親は当然ながら調教者を差すので、ふたなりMASTERでも父親扱いなのはご愛嬌
;・地の文表示→[口上表示]→地の文表示の流れ
;・地の文は分岐箇所に示す通り
;────────────────────────────────────
;%CALLNAME:TARGET%は%CALLNAME:MASTER%に励まされながら、母親似のかわいい女の子を無事出産しました。
;[口上表示]←いまここ
;赤ん坊を抱っこした%CALLNAME:TARGET%は、我が子と%CALLNAME:MASTER%に向けて微笑んでいます。
;-------------------------------------------------
;%CALLNAME:TARGET%は%CALLNAME:MASTER%に励まされながら、父親似の元気な男の子を無事出産しました。
;;[口上表示]←いまここ
;赤ん坊を抱っこした%CALLNAME:TARGET%は、我が子と%CALLNAME:MASTER%に向けて微笑んでいます。
;-------------------------------------------------

;まとめてしまう
;━━━━━━━━━━━━━━━━━━━━━━━━
;ARG:3, 女の子が産まれた　/　ARG:4, 男の子が産まれた
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(100) && GROUPMATCH(ARG, 3, 4) > 0 && KFLAG:(FLAG:ご主人様):50 && FIRSTEVENT(30)
	;FIRSTEVENTとかORDEREVENTとかあまり考えたくないなw
	CALL TWAIT3_K14
	PRINTFORMW 「陣痛は痛い、でも分娩は気持ちいい！ なんて話を聞いた事もあったけど――」
	PRINTFORMW 「そんなレベルの話じゃなかったわ……、ハッキリ言って」
	
	PRINTFORM 「でも、ふふ……この子の顔を見てると、痛い思いをした事なんてどうでも良くなるわね
	CALL PRINT_HEARTCBW_K14(COLOR2_K14("pink"), , , COLOR2_K14("ALICE"))
	
	CALL FADEIN(8, "「これが母性ってものなのかしら」")
	WAIT
	
	CALL TWAIT1_K14
	PRINTFORMW 「ほら、良く見て。しわくちゃだけど、%RAND_SPLIT("目/鼻/口/耳")%の辺りとか\@ ARG == 3 ? 私に似てない？ # %CNAME(MASTER, TARGET)%にそっくり \@」
	
	PRINTFORM 「きっと\@ ARG == 3 ? 将来は素敵な女の子になる # 元気いっぱいに育ってくれる \@と思うわ
	CALL PRINT_HEARTCBW_K14(COLOR2_K14("pink"), , , COLOR2_K14("ALICE"))
	PRINTFORMDL 二人はあたたかく、幸せで、ゆったりとした時の流れに包まれて、
	PRINTFORMDW 我が子がちいさな手を握り締める様子を飽きもせず、いつまでも、いつまでも眺めていた…
	CALL TWAIT3_K14
	RETURN 1
ENDIF

;========================================================================
;EV9, 調教対象妊娠・出産イベント口上 
;========================================================================
;・未実装であり、呼び出しも存在しない
;-------------------------------------------------
;@KOJO_EVENT_K14_9(ARG)