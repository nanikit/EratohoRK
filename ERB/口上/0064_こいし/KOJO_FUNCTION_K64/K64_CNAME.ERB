;-------------------------------------------------
;関数名:K64_CNAME
;概　要:呼び名取得関数
;引　数:ARG:0…[省略可]キャラ登録番号。省略した場合はMASTER
;　　　 ARG:1…[省略可]パターン番号。省略した場合は0
;　　　        0.ARG:0のと会話中の二人称的な呼び方(youとかお前とか)
;　　　        1.ARG:0のいる前で、ARG:0以外と会話中などの状況で三人称的な呼び方(itとかこいつとか)
;　　　        2.ARG:0のいない場所で、独り言等での三人称的な呼び方(thatとかあの子とか)
;戻り値:呼び名(文字列)
;備　考:式中関数
;こいしが誰かの名を呼ぶ際に使用。どうしてこうなった…
;呼び名に関しての異論は認める
;
;とりあえず面倒だったの最小限だけ作る。考えるのはやめた。
;後から気分で増やすかも
;好感度分岐とか入れると泣きそうかも。やっぱ小分けにしようかな…
;-------------------------------------------------
@K64_CNAME(ARG:0 = -2, ARG:1)
#FUNCTIONS
ARG:0 = ARG:0 == -2 ? MASTER # ARG:0	;ARG:0省略時の対応
SIF !INRANGE(ARG:0, 0, CHARANUM - 1)	;不正な引数のガード(ARG:0)
	THROW @K64_CNAMEで例外が発生しました。範囲外のキャラ登録番号です（{ARG:0}）
SIF !INRANGE(ARG:1, 0, 2)				;不正な引数のガード(ARG:1)
	THROW @K64_CNAMEで例外が発生しました。範囲外のパターン番号です（{ARG:1}）

;3*4の12パターンに分岐して、毎度毎度分割して拾う。実際面倒
IF ARG:0 == MASTER				;こいしが奴隷の名を呼ぶ場合(0, 1, 2)
	ARG:1 += 0
ELSEIF TALENT:(ARG:0):ご主人様	;こいしが[ご主人様]の名を呼ぶ場合(3, 4, 5)
	ARG:1 += 3
ELSEIF NO:(FLAG:2) == 64		;こいしがご主人様で、調教者や助手の名を呼ぶ場合(6, 7, 8)
	ARG:1 += 6
ELSE							;こいしがご主人様でなく、調教者や助手の名を呼ぶ場合(9, 10, 11)
	ARG:1 += 9
ENDIF

;キャラ毎の定義
SELECTCASE NO:(ARG:0)
	CASE 0	;あなた。状況に応じていろいろ呼び分けられるけど…まだそこまでは至らず
		;デフォルト名とそれ以外で処理を分けないと気持ち悪いことになりそうな気がした。「それ以外」は文章組み立て上でそもそも厄介だが
		IF CALLNAME:(ARG:0) == "あなた"
			LOCALS = 貴方/この子/あの子/ご主人さま/ご主人さま/ご主人さま/貴方/この子/あの子/貴方/この子/あの子
		ELSE
			LOCALS = 貴方/この子/あの子/%CALLNAME:(ARG:0)%さま/%CALLNAME:(ARG:0)%さま/%CALLNAME:(ARG:0)%さま/%CALLNAME:(ARG:0)%/%CALLNAME:(ARG:0)%/%CALLNAME:(ARG:0)%/%CALLNAME:(ARG:0)%/%CALLNAME:(ARG:0)%/%CALLNAME:(ARG:0)%
		ENDIF
	CASE 1	;霊夢。あるいは霊夢様。主人公その１
		LOCALS = 霊夢/霊夢/霊夢/霊夢様/霊夢様/霊夢様/霊夢/霊夢/霊夢/霊夢/霊夢/霊夢
	CASE 2	;魔理沙。主人公その２
		RETURNF "魔理沙"
	CASE 11	;フランドール。フランちゃんはあまり出てこないから接点がちょっとアレだけど…なんとなくフランちゃんとこいしちゃんとぬえちゃんはセットですよね
		LOCALS = フラン/フラン/フランちゃん/フランちゃん/フランちゃん/フランちゃん/フランちゃん/フランちゃん/フランちゃん/フランちゃん/フランちゃん/フランちゃん
	CASE 23	;萃香。地底繋がり。鬼には一応の敬意を。調教が進んだ段階で変えるというのも手
		LOCALS = 萃香さん/萃香さん/萃香さん/萃香さん/ご主人さま/萃香さん/萃香さん/萃香さん/萃香さん/萃香さん/萃香さん/萃香さん
	CASE 32	;文。取材受けたので面識があるけどよく知らないので微妙な扱い。天狗は警戒対象。毎度おなじみ射命丸、なので名前を覚えない
		;※新聞屋さんがいっぱいいる場合、話がややこしくなるので変える。新聞屋さん→文, はたて
		IF K64_GETCHARABYNAME("はたて") >= 0
			LOCALS = 貴方/この子/あの子/射命丸さん/ご主人さま/射命丸さん/射命丸さん/射命丸さん/射命丸さん/射命丸さん/射命丸さん/射命丸さん
		ELSE
			LOCALS = 貴方/この子/あの子/射命丸さん/ご主人さま/射命丸さん/新聞屋さん/新聞屋さん/新聞屋さん/新聞屋さん/新聞屋さん/新聞屋さん
		ENDIF
	CASE 36	;四季映姫。地獄管理繋がりというよりは、きっと幻想郷の有名人
		RETURNF "閻魔様"
	CASE 40	;にとり。東方心綺楼繋がり。河童は地底にもいるらしい。なら格下扱いでいい
		LOCALS = にとり/にとり/にとり/にとり/にとり/にとり/雑貨屋さん/雑貨屋さん/雑貨屋さん/雑貨屋さん/雑貨屋さん/雑貨屋さん
	CASE 42	;早苗。あるいは早苗様。東方地霊殿繋がり
		LOCALS = 早苗/早苗/早苗/早苗様/早苗様/早苗様/早苗/早苗/早苗/早苗/早苗/早苗
	CASE 43	;神奈子。東方地霊殿で話に出てきただけ
		;※神様がいっぱいいる場合、話がややこしくなるので変える。神様→静葉, 穣子, 雛, 神奈子, 諏訪子
		IF K64_GETCHARACOUNT("静葉/雛/神奈子/諏訪子")
			LOCALS = 神奈子ちゃん/神奈子ちゃん/神奈子ちゃん/神奈子さま/神奈子さま/神奈子さま/神奈子さま/神奈子さま/神奈子さま/神奈子さま/神奈子さま/神奈子さま
		ELSE
			LOCALS = 神奈子ちゃん/神奈子ちゃん/神奈子ちゃん/神様/神様/神様/神様/神様/神様/神様/神様/神様
		ENDIF
	CASE 44	;諏訪子。東方地霊殿繋がり。何故か魔法少女っぽくなる
		;※神様がいっぱいいる場合、話がややこしくなるので変える。神様→静葉, 穣子, 雛, 神奈子, 諏訪子
		IF K64_GETCHARACOUNT("穣子/静葉/雛/神奈子")
			LOCALS = ケロちゃん/ケロちゃん/ケロちゃん/諏訪子さま/諏訪子さま/諏訪子さま/諏訪子さま/諏訪子さま/諏訪子さま/諏訪子さま/諏訪子さま/諏訪子さま
		ELSE
			LOCALS = ケロちゃん/ケロちゃん/ケロちゃん/神様/神様/神様/神様/神様/神様/神様/神様/神様
		ENDIF
	CASE 57	;キスメ。地底繋がり。地底で古明地を恐れないのは鬼くらいということにしておく
		RETURNF "キスメ"
	CASE 58	;ヤマメ。地底繋がり
		RETURNF "ヤマメ"
	CASE 59	;パルスィ。地底繋がり。ご主人様のとき調子に乗るタイプ
		LOCALS = パルスィ/パルスィ/パルスィ/パルスィさま/ご主人さま/パルスィさま/パルスィ/パルスィ/パルスィ/パルスィ/パルスィ/パルスィ
	CASE 60	;勇儀。地底繋がり。鬼
		LOCALS = 勇儀さん/勇儀さん/勇儀さん/勇儀さん/ご主人さま/勇儀さん/勇儀さん/勇儀さん/勇儀さん/勇儀さん/勇儀さん/勇儀さん
	CASE 61	;さとり
		RETURNF "お姉ちゃん"
	CASE 62	;燐
		RETURNF "お燐"
	CASE 63	;空
		RETURNF "おくう"
	CASE 64	;こいし。この分岐はご主人様の名前を取るのにFLAG:2を渡したときに生きる…かも
		RETURNF "私"
	CASE 66	;小傘。さでずむ
		RETURNF "小傘"
	CASE 67	;一輪。地底繋がり
		RETURNF "一輪"
	CASE 67	;ムラサ。地底繋がり
		RETURNF "水蜜"
	CASE 70	;白蓮。東方求聞口授で勧誘された繋がり
		LOCALS = 白蓮/白蓮/白蓮/聖/聖/聖/和尚さん/和尚さん/和尚さん/和尚さん/和尚さん/和尚さん
	CASE 71	;ぬえ。地底繋がり。なんとなくフランちゃんとこいしちゃんとぬえちゃんはセット
		LOCALS = ぬえ/ぬえ/ぬえちゃん/ぬえちゃん/ぬえちゃん/ぬえちゃん/ぬえちゃん/ぬえちゃん/ぬえちゃん/ぬえちゃん/ぬえちゃん/ぬえちゃん
	CASE 72	;はたて。取材受けたので面識があるけどよく知らないので微妙な扱い。天狗は警戒対象
		;※新聞屋さんがいっぱいいる場合、話がややこしくなるので変える。新聞屋さん→文, はたて
		IF K64_GETCHARABYNAME("文") >= 0
			LOCALS = 貴方/この子/あの子/はたてさん/ご主人さま/はたてさん/はたてさん/はたてさん/はたてさん/はたてさん/はたてさん/はたてさん
		ELSE
			LOCALS = 貴方/この子/あの子/新聞屋さん/ご主人さま/新聞屋さん/新聞屋さん/新聞屋さん/新聞屋さん/新聞屋さん/新聞屋さん/新聞屋さん
		ENDIF
	CASE 73	;華扇。鬼
		LOCALS = 華扇さん/華扇さん/華扇さん/お師匠さま/お師匠さま/お師匠さま/華扇さん/華扇さん/華扇さん/華扇さん/華扇さん/華扇さん
	CASE 78	;布都。東方心綺楼繋がり。ぺどい
		LOCALS = 布都ちゃん/布都ちゃん/布都ちゃん/布都ちゃん/ご主人さま/布都ちゃん/布都ちゃん/布都ちゃん/布都ちゃん/布都ちゃん/布都ちゃん/布都ちゃん
	CASE 79	;神子。東方心綺楼繋がり
		LOCALS = 神子/神子/神子/太子様/太子様/太子様/神子/神子/神子/神子/神子/神子
	CASE 80	;マミゾウ。東方心綺楼繋がり。ただものではない雰囲気
		LOCALS = マミゾウ/マミゾウ/マミゾウ/マミゾウさん/マミゾウさん/マミゾウさん/タヌキさん/タヌキさん/タヌキさん/タヌキさん/タヌキさん/タヌキさん
	;その他の方々
	;支障が出そうな方々から順次独立させる方向で。主に格が違った方々を分ける
	CASEELSE
		LOCALS = %CALLNAME:(ARG:0)%/%CALLNAME:(ARG:0)%/%CALLNAME:(ARG:0)%/%CALLNAME:(ARG:0)%さん/ご主人さま/%CALLNAME:(ARG:0)%さん/%CALLNAME:(ARG:0)%さん/%CALLNAME:(ARG:0)%さん/%CALLNAME:(ARG:0)%さん/%CALLNAME:(ARG:0)%さん/%CALLNAME:(ARG:0)%さん/%CALLNAME:(ARG:0)%さん
ENDSELECT
RETURNF AUTO_SPLIT(LOCALS, "/", ARG:1)
