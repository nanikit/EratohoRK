;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
;
;	[リリーホワイト]口上 オープニング、エンディング口上ファイル
;
;	オープニング, エンディングイベント口上のファイル
;
;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#

;========================================================================
;EV1, オープニング口上
;========================================================================
;・口上主(TARGET)が主人である場合にのみ表示される
;・戻り値を2とした場合はOP後の本体側のタイトルロゴは表示されない
;・ノーマルモード以外の場合、調教対象がNO:MASTER == 0(いわるゆるあなた)でない可能性あり
;-------------------------------------------------
;関連変数…
;FLAG:モード(0=通常/1=サンドボックス/9=エキストラ)
;-------------------------------------------------
@KOJO_EVENT_K15_1(ARG)
;-------------------------------------------------
;CNAMEやCSTR:召喚可能助手、その他各種代入に向いた箇所の一つです
;コマンド封印も個別に可能ですが、本体側の意向として(一応)隠し機能にしたいという事情もあり
;判る人はどうぞ、という事で解説はしない方向で
;-------------------------------------------------
;口上を表示した上で、終端をRETURN 0とする事で本体側の汎用OPに渡す事も可能だったりします
;汎用OPに飛ばした際はタイトルロゴが表示されます
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;ノーマルモード時
;RESULT値(1,OPを表示した後本体のタイトルロゴを表示/2, 本体のタイトルロゴを表示しない)
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && !FLAG:モード
	;-------------------------------------------------
	;とりあえず必要そうなものを例として置いておきます
	;実際にどのように扱うかは、既存の口上を見てもらえば分かるかと
	
	;召喚可能助手代入		以下の例の場合、霊夢と魔理沙のみ魔力使用で呼ぶ事が出来る
	;CSTR:召喚可能助手 = 霊夢/魔理沙/
	
	;MASTERの呼び名代入		以下の例の場合、MASTERの呼び名は貴方となる
	;CSTR:(TARGET):呼び方リスト = %NAME:MASTER%_貴方/%CSTR:(TARGET):呼び方リスト%
	;他の箇所(例えばEVENT11)等で条件式を組んでINPUTを絡ませて代入、という事も可能
	
	;キャラカットイン CSVで定義されたものが呼ばれる。CSVCSTRで任意のキャラのカットインを呼ぶ事も可能
	;CALL CHARA_CUTIN(CSTR:二つ名, CSTR:登場名, CSTR:ローマ字)
	
	;ＢＧＭカットイン(CSTR:曲１, CSTR:曲２でキャラCSVで定義されたものを呼び、直接記述する事で任意の内容に変更する事も出来る)
	;CALL BGM_CUTIN(CSTR:曲１)
	;-------------------------------------------------
	PRINTFORMW ………
	PRINTFORMW ……
	PRINTFORMW …
	PRINTFORMW 
	PRINTL  
	PRINTL  
	;相手が大ちゃん
	IF NO:TARGET == 4
		PRINTFORMW 「ねぇ、大ちゃん……これ、なんでしょうか？」
		PRINTL  
		PRINTFORMDW ふたりが湖の畔で見つけたのは、一冊の古びた日記だった
		PRINTFORMDW 汚れが酷く読めない箇所も多かったが、日記の持ち主が何をしていたのかは漠然と理解することができた
		PRINTL  
		PRINTFORMDW それは、『あなた』と『少女』の物語……
		PRINTFORMDW ふたりの次の遊びが決まった瞬間、運命の歯車が狂い始めた……
		PRINTL  
		PRINTFORMW 「大ちゃん……ううん、『あなた』かな？」
		PRINTFORMW 「そう、『あなた』と『リリー』の物語……」
		PRINTL  
		PRINTFORMDW 始めましょうか……
		RETURN 1
	ENDIF
	
	;オープニングシナリオ
	$INPUT_LOOP3
	PRINTFORMDL オープニングを見ますか
	PRINTFORMDL [1]見る
	PRINTFORMDL [2]飛ばす
	INPUT
	IF RESULT == 1
		PRINTL  
		PRINTFORMDW ………
		PRINTL  
		PRINTFORMDW ……
		PRINTL  
		PRINTFORMDW …
		PRINTL  
	ELSEIF RESULT == 2
		GOTO SKIP_OPENING
	ELSE
		GOTO INPUT_LOOP3
	ENDIF
	;↓ＯＰ口上開始
	PRINTL  	
	PRINTFORMDW 　オープニングプロット（予定）
	PRINTL  	
	PRINTFORMDW 　あなたは見慣れない部屋で目を覚まします。
	PRINTFORMDW 　四畳半ほどの小さな部屋には明り取りの小さな小窓が一つ、あなたが寝ていたベッドの他に特にめぼしい物は見当たりません。
	PRINTFORMDW 　着の身着のまま、荷物は全てベッド脇のテーブルの上に置いてあります。
	PRINTFORMDW 　あなたは自分が何故ここにいるのか思い出せません。
	PRINTFORMDW 　あなたが家主に話を聞こうと部屋を出ると、幼い少女が笑顔で駆け寄って来ました。
	PRINTFORMDW 　純白のローブにお揃いの三角帽子、金髪の長い艶髪に彩られた愛らしい小さな顔、その背中にうっすらと輝く妖精の羽。
	PRINTFORMW 「あっ…よかった、目が覚めたんですね？」
	PRINTFORMW 「急に倒れるから心配しましたよ」
	PRINTFORMDW 　彼女の顔を見た瞬間、あなたは昨夜起こった事を思い出しました。
	PRINTFORMDW 　山菜採りに出掛けた帰り道、あなたはこの妖精に出逢ったのです。
	PRINTFORMDW 　妖精嫌いで知られる阿求女史にして『その姿を見かけることは吉兆である』と言わしめる程で、
	PRINTFORMDW 　人懐こく、特に花屋には餌付けをされるほど可愛がられている妖精――リリーホワイト。
	PRINTFORMDW 　そのリリーが木の陰に身を隠すようにして座り込み、両手で自分の肩を抱きガタガタと震えていたのです。
	PRINTFORMDW 　
	PRINTL  
	;↑ＯＰ口上終了（口上チェック忘れずに）
	$SKIP_OPENING
	RETURN 1
ENDIF

;将来的に他のモードが追加された場合はFLAG:モードを決めうちした方が良いかも知れません
;━━━━━━━━━━━━━━━━━━━━━━━━
;ノーマルモード以外の場合
;RESULT値(1,OPを表示した後本体のタイトルロゴを表示/2, 本体のタイトルロゴを表示しない)
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && FLAG:モード > 0
	PRINTFORMW 
	RETURN 1
ENDIF

;========================================================================
;EV2, エンディングイベント口上
;========================================================================
;・開始30日以降、日時の更新時にシステム側からEVENT2が呼び出される
;・戻り値1以上が返ると本体側でFLAG:END達成が立ち、以降はシステム側から呼び出される事はない
;・以前は戻り値1以外はFLAG:END達成が立たない仕様でしたが、現在はRESULT > 0ならフラグが立つようになっています
;・必要に応じてFIRSTEVENTを使っておくと万が一の保険にはなりますし、仕様変更にも強いです
;-------------------------------------------------
;　最短で呼び出されるのが30日というだけなので、その他の部分では口上側で任意に条件設定が可能です
;　IF 口上記入チェック() &&で条件で区切るなり、IF 口上記入チェック()で大分岐にした上で、小分岐内で個別に条件設定も出来ます
;　階層イベント形式にして表示させた上でRETURN 0。最後にRETURN 1で。なんて事も可能ではあったり
;　可能性は無限にあるので、条件設定は各口上作者に委ねたいと思います
;-------------------------------------------------
@KOJO_EVENT_K15_2(ARG)
;-------------------------------------------------
;将来的にはCFLAG:依存度による本体側のED分岐なんていう代物の構想もあったり
;その際には、本体側の処理を呼ぶ/殺すも口上側で任意に設定が可能という方向性
;とはいえ、いつになるのか、実現するかも定かではないので、現状は各自頑張って下さいということで
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;エンディング
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && KFLAG:3 == 0 && FLAG:オートモード表示設定 == 0 && FIRSTEVENT(0)
		PRINTFORMW ………
		PRINTFORMW ……
		PRINTFORMW …
		PRINTFORMW 
	$INPUT_LOOP5
		PRINTFORMDL エンディングを見ますか
		PRINTFORMDL [1]見る
		PRINTFORMDL [2]飛ばす（続行分岐と等価）
		INPUT
	IF RESULT == 1
		PRINTL  
		PRINTFORMDW ………
		PRINTL  
		PRINTFORMDW ……
		PRINTL  
		PRINTFORMDW …
		PRINTL  
	ELSEIF RESULT == 2
		GOTO SKIP_ENDING
	ELSE
		GOTO INPUT_LOOP5
	ENDIF

	;-------------------------------------------------
	;大リリエンド（ＥＸ）
	;-------------------------------------------------
	IF NO:MASTER == 4
		PRINTFORMW 「ねぇ大ちゃん、今日が何の日かわかりますか？」
		PRINTFORMW 「約束だった、最後の日……」
		PRINTFORMW 「つまり、大ちゃんが自由になれる日です！！」
		PRINTFORMW 「と言っても……太陽が昇るまでは、まだリリーの奴隷さんですけどねっ♪」
		PRINTL  
		PRINTFORMW 「夜って……暗くて、冷たくて、寂しくて……ずっと怖かったんです……」
		PRINTFORMW 「リリーひとりだったら……我慢できなくて泣いちゃうか、お布団に潜って震えてたと思います」
		PRINTFORMW 「でも最近は夜の時間も愉しくて……明日は何をしてあげよう、大ちゃんはどんな反応をするんだろうって、
		PRINTFORMW 　そんな事を考えながら、いつの間にか眠っちゃってて……起きたら傍に大ちゃんが居てくれて……」
		PRINTFORMW 「………うん、とっても楽しかったんです」
		PRINTL  
		PRINTFORMW 「……空、ちょっと白くなってきましたね」
		PRINTFORMW 「こんな時間まで起きてたの初めてだから、なんだか新鮮な感じです♪」
		PRINTFORMW 「大ちゃんはどうです？　やっぱり初めての光景ですか？」
		PRINTFORMW 「……身体が痛くて起きた事がある、ですか……」
		PRINTFORMW 「……無茶な事もいっぱいしましたもんね……すみません……」
		PRINTFORMW 「……そう、ですよね……」
		PRINTL  
		PRINTFORMW 「オレンジ色の光……リリー達の大好きな、太陽の光ですね……」
		PRINTFORMW 「もうすぐ、夜が明けちゃう……」
		PRINTL  
		PRINTFORMW 「あの……お願いがあるんですけど、朝が来たら教えて貰えますか？」
		PRINTFORMW 「夜はやっぱり怖くて……布団に潜っていたい気分なんです……」
		PRINTL  
		PRINTFORMW 「……ねぇ、大ちゃん……空を見て貰えますか？」
		PRINTFORMW 「まだ、夜ですか？　それとも、もう朝になっちゃいましたか？」
		PRINTL  
		PRINTFORMW 「……ねぇ、大ちゃん……まだ、そこに居ますか？」
		PRINTL  
		PRINTFORMW 「大ちゃんは……リリーの……に、…て……ますか……？」
		PRINTL  
		PRINTFORMDW わたしは……
		PRINTL  
		PRINTFORMDW ………
		PRINTFORMDW ……
		PRINTFORMDW …
		PRINTL  
		PRINTFORMDW ＥＮＤＩＮＧ　ＮＯ．ＥＸ
		PRINTFORMDW 　　――『はるかぜとともに』――
		PRINTW  
		PRINTL  
		PRINTL  

	;-------------------------------------------------
	;助手＆相思相愛エンド（三・四）
	;（好意3000以上・好感度3000以上）
	;-------------------------------------------------
	ELSEIF FAVOR(3000, 3000) && !TALENT:TARGET:ご主人様
		PRINTFORMW 「」
		;あなたに選択を迫る
		$ENDING_LOOP1
		PRINTFORMDL [1]%CNAME((FLAG:ご主人様), TARGET)%
		PRINTFORMDL [2]リリー
		INPUT
		IF RESULT != 1 && RESULT != 2
			GOTO ENDING_LOOP1
		;本来のご主人様と生きていく
		ELSEIF RESULT == 1
			PRINTFORMDW %CALLNAME:MASTER%は、%CNAME((FLAG:ご主人様), TARGET)%を選んだ…
			PRINTFORMW 「なにをすればいいのか……分かるでしょう？」
			PRINTL  
			PRINTFORMDW %CALLNAME:MASTER%は、彼女の言ってることが、良く分からない
			;ナンバー
			PRINTL  
			PRINTFORMDW ＥＮＤＩＮＧ　ＮＯ．３　『リリーの伴侶』
			PRINTW  
			PRINTL  
			PRINTL  
		;リリーを選ぶ
		ELSE
			PRINTFORMDW %CALLNAME:MASTER%は、リリーを選んだ。
			;ナンバー
			PRINTW  
			PRINTFORMDW ＥＮＤＩＮＧ　ＮＯ．４　『リリーの嫁』
			PRINTW  
			PRINTL  
			PRINTL  
		ENDIF

	;-------------------------------------------------
	;ご主人様＆相思相愛エンド（一、二）
	;（好意3000以上・好感度3000以上）
	;-------------------------------------------------
	ELSEIF FAVOR(3000, 3000) && TALENT:TARGET:ご主人様
		PRINTFORMDW 朝、%CALLNAME:MASTER%が目を覚ますとリリーの姿が目に映った。
		PRINTFORMDW それは見慣れた、可愛らしい清楚な姿形に身を包んだ、
		PRINTFORMDW %CALLNAME:MASTER%は……
		;あなたに選択を迫る
		$ENDING_LOOP2
		PRINTFORMDL [1]このままリリーのモノになりたい
		PRINTFORMDL [2]早くリリーから解放されたい
		INPUT
		IF RESULT != 1 && RESULT != 2
			GOTO ENDING_LOOP2
		;リリーと生きていく
		ELSEIF RESULT == 1
			PRINTL  
			PRINTFORMDW %CALLNAME:MASTER%は、リリーへの隷属を願った。
			PRINTFORMW 「これからも……宜しくお願いしますね……%CNAME(MASTER)%♪」
			;ナンバー
			PRINTW  
			PRINTFORMDW ＥＮＤＩＮＧ　ＮＯ．３　『妖精さんの生きる目的』
			PRINTW  
			PRINTL  
			PRINTL  
		;自由を望む
		ELSE
			PRINTL  
			PRINTFORMDW %CALLNAME:MASTER%は、リリーからの解放を願った。
			PRINTFORMW 「幸せに……なれるといいね、%CNAME(MASTER)%♪」
			;ナンバー
			PRINTW  
			PRINTFORMDW ＥＮＤＩＮＧ　ＮＯ．４　『妖精さんの生きる術』
			PRINTW  
			PRINTL  
			PRINTL  
			PRINTFORMDW 終了します
			QUIT
		ENDIF
		;書いたら口上チェック忘れずに
	;-------------------------------------------------
	ENDIF
	$SKIP_ENDING
	KFLAG:3 = 1


	;戻り値は1で決めうちしておきます
	RETURN 1
ENDIF


